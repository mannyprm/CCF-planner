# DigitalOcean Production Environment Configuration
# Copy this to .env.production and update with your actual values

# =============================================================================
# DIGITALOCEAN DEPLOYMENT SETTINGS
# =============================================================================

# Your temporary DigitalOcean domain (provided after app creation)
# Format: your-app-name.ondigitalocean.app
DO_TEMP_DOMAIN=your-app-name.ondigitalocean.app

# Full URLs using the temporary domain
FQDN=${DO_TEMP_DOMAIN}
SCHEME=https
WS_SCHEME=wss
APPFLOWY_BASE_URL=${SCHEME}://${FQDN}
APPFLOWY_WEBSOCKET_BASE_URL=${WS_SCHEME}://${FQDN}/ws/v2
API_EXTERNAL_URL=${SCHEME}://${FQDN}
GOTRUE_SITE_URL=${SCHEME}://${FQDN}

# =============================================================================
# DATABASE CONFIGURATION (DigitalOcean Managed Database)
# =============================================================================

# Option 1: Use DigitalOcean Managed PostgreSQL (Recommended)
# Get these from your DigitalOcean database cluster
# DO_POSTGRES_HOST=your-db-cluster.db.ondigitalocean.com
# DO_POSTGRES_PORT=25060
# DO_POSTGRES_USER=doadmin
# DO_POSTGRES_PASSWORD=your-password-here
# DO_POSTGRES_DB=defaultdb
# DO_POSTGRES_SSLMODE=require

# Option 2: Use Docker PostgreSQL (for single droplet deployment)
POSTGRES_HOST=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
POSTGRES_PORT=5432
POSTGRES_DB=appflowy

# Database URLs
APPFLOWY_DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
GOTRUE_DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?search_path=auth
AI_DATABASE_URL=postgresql+psycopg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Option 1: DigitalOcean Managed Redis
# DO_REDIS_HOST=your-redis-cluster.db.ondigitalocean.com
# DO_REDIS_PORT=25061
# DO_REDIS_PASSWORD=your-redis-password

# Option 2: Docker Redis
REDIS_HOST=redis
REDIS_PORT=6379

APPFLOWY_REDIS_URI=redis://${REDIS_HOST}:${REDIS_PORT}
ADMIN_FRONTEND_REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}
AI_REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# =============================================================================
# OBJECT STORAGE (DigitalOcean Spaces or MinIO)
# =============================================================================

# Option 1: DigitalOcean Spaces (Recommended for production)
# DO_SPACES_KEY=your-spaces-access-key
# DO_SPACES_SECRET=your-spaces-secret-key
# DO_SPACES_ENDPOINT=nyc3.digitaloceanspaces.com
# DO_SPACES_BUCKET=your-bucket-name
# DO_SPACES_REGION=nyc3

# Option 2: MinIO (for single droplet deployment)
AWS_ACCESS_KEY=CHANGE_THIS_ACCESS_KEY
AWS_SECRET_KEY=CHANGE_THIS_SECRET_KEY
MINIO_HOST=minio
MINIO_PORT=9000
APPFLOWY_S3_BUCKET=appflowy
APPFLOWY_S3_REGION=us-east-1
APPFLOWY_S3_MINIO_URL=http://${MINIO_HOST}:${MINIO_PORT}

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Secret (generate with: openssl rand -base64 32)
GOTRUE_JWT_SECRET=CHANGE_THIS_TO_RANDOM_SECRET_MIN_32_CHARS
JWT_SECRET=${GOTRUE_JWT_SECRET}

# Admin credentials (CHANGE THESE!)
GOTRUE_ADMIN_EMAIL=admin@yourdomain.com
GOTRUE_ADMIN_PASSWORD=CHANGE_THIS_STRONG_ADMIN_PASSWORD

# Session settings
APPFLOWY_ACCESS_TOKEN_EXPIRES_IN=2592000  # 30 days
APPFLOWY_REFRESH_TOKEN_EXPIRES_IN=7776000  # 90 days
APPFLOWY_SESSION_TIMEOUT=86400  # 24 hours

# =============================================================================
# EMAIL CONFIGURATION (Optional but recommended)
# =============================================================================

# SMTP Settings (for invitations and notifications)
GOTRUE_SMTP_HOST=smtp.sendgrid.net
GOTRUE_SMTP_PORT=465
GOTRUE_SMTP_USER=apikey
GOTRUE_SMTP_PASS=your-sendgrid-api-key
GOTRUE_SMTP_ADMIN_EMAIL=noreply@yourdomain.com
GOTRUE_SMTP_MAX_FREQUENCY=15

APPFLOWY_MAILER_SMTP_HOST=${GOTRUE_SMTP_HOST}
APPFLOWY_MAILER_SMTP_PORT=${GOTRUE_SMTP_PORT}
APPFLOWY_MAILER_SMTP_USERNAME=${GOTRUE_SMTP_USER}
APPFLOWY_MAILER_SMTP_PASSWORD=${GOTRUE_SMTP_PASS}

# =============================================================================
# AI SERVICES
# =============================================================================

# OpenAI (optional)
AI_OPENAI_API_KEY=

# Azure OpenAI (optional)
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_VERSION=

# Anthropic Claude (optional)
ANTHROPIC_API_KEY=

# JinaAI (for sermon enhancement)
JINA_API_KEY=

# Brave Search (for research)
BRAVE_SEARCH_KEY=

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# AppFlowy Settings
APPFLOWY_DATABASE_MAX_CONNECTIONS=100
APPFLOWY_ACCESS_CONTROL=true
APPFLOWY_INDEXER_ENABLED=true
APPFLOWY_TELEMETRY_ENABLED=false

# Admin Frontend
ADMIN_FRONTEND_GOTRUE_URL=http://gotrue:9999

# CCF-Planner specific
CCF_CHURCH_NAME="Your Church Name"
CCF_DEFAULT_TIMEZONE="America/New_York"

# =============================================================================
# MONITORING & LOGGING (Optional)
# =============================================================================

# Sentry (error tracking)
SENTRY_DSN=

# LogDNA / Papertrail (log aggregation)
LOG_ENDPOINT=
LOG_API_KEY=

# New Relic (APM)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=ccf-planner-production

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================

# After creating your DigitalOcean App:
# 1. Update DO_TEMP_DOMAIN with your assigned domain
# 2. Configure environment variables in DigitalOcean App Platform
# 3. Set up managed databases if using them
# 4. Configure Spaces for object storage if needed
# 5. Update DNS settings when ready for custom domain

# Security Checklist:
# [ ] Change all default passwords
# [ ] Generate new JWT secret
# [ ] Configure firewall rules
# [ ] Enable automatic backups
# [ ] Set up monitoring alerts
# [ ] Configure SSL/TLS certificates
# [ ] Review and update CORS settings
# [ ] Enable rate limiting
# [ ] Set up DDoS protection (Cloudflare recommended)